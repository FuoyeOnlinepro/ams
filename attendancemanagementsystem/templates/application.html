<!DOCTYPE html>
{% load humanize %}

<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Student Housing - Home</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f9f9f9;
    color: #222;
  }

  /* Container */
  .container {
    max-width: 480px;
    margin: 0 auto;
    padding: 12px 9px 80px; /* bottom padding for nav */
  }

  /* Header */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    padding-bottom: 10px;
  }
  .logo {
    font-weight: 700;
    font-size: 1.4rem;
    color: #2c3e50;
  }
  .profile-icon {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #3498db;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
    font-size: 1.2rem;
    cursor: pointer;
  }

  /* Search Bar */
  .search-bar {
    display: flex;
    align-items: center;
    background: white;
    border-radius: 25px;
    padding: 10px 16px;
    margin-bottom: 12px;
    box-shadow: 0 1px 5px rgb(0 0 0 / 0.1);
  }
  .search-bar input {
    border: none;
    outline: none;
    flex-grow: 1;
    font-size: 1rem;
    color: #444;
  }
  .search-bar .search-icon {
    margin-right: 10px;
    color: #3498db;
    font-size: 1.2rem;
  }
  .search-bar .clear-btn {
    background: transparent;
    border: none;
    color: #aaa;
    font-size: 1.2rem;
    cursor: pointer;
  }

  /* Filters Row */
  .filters-row {
  display: flex;
  overflow-x: auto;
  gap: 12px;
  margin-bottom: 20px;
  padding-bottom: 2px;
  padding-top: 9px;

  /* Hide scrollbar for most browsers */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE 10+ */
}
.filters-row::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}
.filter-btn {
  position: relative;
  flex-shrink: 0;
  background:  #3498db;
  border-radius: 20px;
  padding: 8px 14px;
  font-size: 0.9rem;
  color: #9c4308;
  border: 1px solid #3498db;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
  user-select: none;
  transition: background-color 0.3s, color 0.3s;
  z-index: 0;
  overflow: visible;
}

/* Classic glowing animated border */
.filter-btn::before {
  content: "";
  position: absolute;
  top: -3px;
  left: -3px;
  right: -3px;
  bottom: -3px;
  border-radius: 23px;
  border: 2px solid #3498db;
  box-shadow: 0 0 8px 2px #4facfe;
  opacity: 0.7;
  animation: pulse-border 2.5s ease-in-out infinite;
  z-index: -1;
}

.filter-btn:hover {
  background: #3498db;
  color: white;
  border-color: #3498db;
}

/* Pulse animation */
@keyframes pulse-border {
  0%, 100% {
    box-shadow: 0 0 8px 2px #4facfe;
    opacity: 0.7;
  }
  50% {
    box-shadow: 0 0 16px 4px #4facfe;
    opacity: 1;
  }
}

.button-group {
  display: flex;
  gap: 182px; /* space between buttons */
  align-items: center; /* vertical alignment */
}

  /* Featured Carousel */
  .featured-carousel {
  display: flex;
  overflow-x: auto;
  gap: 16px;
  padding-bottom: 10px;
  margin-bottom: 24px;

  /* Hide scrollbar for most browsers */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE 10+ */
}
.featured-carousel::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

  .featured-card {
    min-width: 280px;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 3px 8px rgb(0 0 0 / 0.1);
    position: relative;
    background: white;
    cursor: pointer;
  }
  .featured-card img {
    width: 100%;
    height: 160px;
    object-fit: cover;
  }
  .featured-info {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
    color: white;
    padding: 10px 14px;
    font-weight: 600;
  }

  /* Quick Categories */
  .quick-categories {
  display: flex;
  gap: 12px;
  padding: 3px;
  
  overflow-x: auto;
  margin-bottom: 10px;

  /* Hide scrollbar for most browsers */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE 10+ */
}
.quick-categories::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

  .category-item {
    flex-shrink: 0;
    background: white;
    border-radius: 12px;
    padding: 12px 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 80px;
    height: 90px;
    cursor: pointer;
    box-shadow: 0 1px 6px rgb(0 0 0 / 0.07);
    user-select: none;
    transition: background-color 0.3s;
  }
  .category-item:hover {
    background: #3498db;
    color: white;
  }
  .category-icon {
    font-size: 1.8rem;
    margin-bottom: 6px;
  }
  .category-label {
    font-size: 0.85rem;
    text-align: center;
  }

  /* Recommended Listings */
  .recommended-listings {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  .listing-card {
    display: flex;
    background: rgb(255, 255, 255);
    border-radius: 12px;
    box-shadow: 0 2px 6px rgb(0 0 0 / 0.08);
    overflow: hidden;
    cursor: pointer;
  }
  .listing-card img {
    width: 100px;
    height: 80px;
    object-fit: cover;
  }
  .listing-info {
    padding: 12px 14px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .listing-title {
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: 6px;
  }
  .listing-desc {
    font-size: 0.85rem;
    color: #666;
    margin-bottom: 8px;
  }
  .listing-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .price {
    font-weight: 700;
    color: #3498db;
  }
  .actions {
    display: flex;
    gap: 12px;
  }
  .action-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    color: #888;
    transition: color 0.2s;
  }
  .action-btn:hover {
    color: #3498db;
  }

  /* Bottom Navigation */
  nav.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 480px;
    background: white;
    box-shadow: 0 -1px 8px rgb(0 0 0 / 0.1);
    display: flex;
    justify-content: space-around;
    padding: 10px 0;
    z-index: 100;
  }
  .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #666;
    font-size: 0.75rem;
    cursor: pointer;
    user-select: none;
  }
  .nav-item.active {
    color: #3498db;
  }
  .nav-icon {
    font-size: 1.4rem;
    margin-bottom: 2px;
  }

  /* Scrollbar styling for WebKit */
  .filters-row::-webkit-scrollbar,
  .featured-carousel::-webkit-scrollbar,
  .quick-categories::-webkit-scrollbar {
    height: 6px;
  }
  .filters-row::-webkit-scrollbar-thumb,
  .featured-carousel::-webkit-scrollbar-thumb,
  .quick-categories::-webkit-scrollbar-thumb {
    background-color: #ccc;
    border-radius: 3px;
  }












  

 
</style>
</head>



<!-- Spinner Overlay -->
<div id="spinner-overlay">
  <div class="spinner"></div>
</div>



<style>
/* Fullscreen glass blur background */
#spinner-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999; /* on top of everything */
}

/* Classic spinner style */
.spinner {
  width: 50px;
  height: 50px;
  border: 5px solid rgba(79, 172, 254, 0.3);
  border-top-color: #4facfe;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* Spin animation */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
</style>



<script>
  window.addEventListener('load', () => {
  const spinner = document.getElementById('spinner-overlay');
  if (spinner) {
    spinner.style.display = 'none';
  }
});

</script>






<body>

<div class="container">

  
  <header>
    <div class="logo" style="font-family: 'Arial Black', Gadget, sans-serif; font-size: 36px; color: #001125; text-shadow: 2px 2px 5px rgba(0,0,0,0.3); letter-spacing: 3px; font-weight: bold; text-transform: uppercase;">
      Roomify
    </div>
   
  </header>

  <div class="search-bar">
    <span class="search-icon" aria-hidden="true" focusable="false" style="display: inline-block; vertical-align: middle; width: 20px; height: 20px;">
        <svg 
            width="20" 
            height="20" 
            viewBox="0 0 24 24" 
            fill="none" 
            xmlns="http://www.w3.org/2000/svg" 
            stroke="currentColor" 
            stroke-width="2" 
            stroke-linecap="round" 
            stroke-linejoin="round"
        >
            <circle cx="11" cy="11" r="7"/>
            <line x1="16.6569" y1="16.6569" x2="21" y2="21"/>
        </svg>
    </span>
    
    <input id="apartment-search" type="text" placeholder="Search for houses near campus…" />
    <button class="clear-btn" title="Clear Search" onclick="clearSearch()">✕</button>
</div>

  















<script>
 
function clearSearch() {
    $('#apartment-search').val('');        // Clear the input field
    $('#search-results').html('');         // Clear search results
    $('#spinner').hide();                  // Hide spinner if visible
}
</script>



  <div id="search-results"></div>
  
<style>
  #search-results {
    margin-top: 1em;
}
.apartment-card {
    border: 1px solid #ddd;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 8px;
    background-color: #f9f9f9;
}
.apartment-card img {
    max-width: 100%;
    border-radius: 6px;
}

</style>



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<script> 
  $(document).ready(function() {
      // Hide spinner initially
      $('#spinner').hide();
  
      $('#apartment-search').on('keyup', function() {
          const query = $(this).val().trim();
          if (query.length > 1) {
              $('#spinner').show(); // Show spinner
              $.ajax({
                  url: '{% url "search_apartments" %}',
                  data: { q: query },
                  success: function(response) {
                      const results = response.results;
                      let html = '';
                      if (results.length > 0) {
                          results.forEach(function(apartment) {
                              const formattedPrice = Number(apartment.price).toLocaleString('en-NG', {
                                  minimumFractionDigits: 2,
                                  maximumFractionDigits: 2
                              });
                              html += `
                                  <div class="apartment-card">
                                      <a href="/hostelallocation/hostelallocation/apartment/${apartment.id}/">
                                          <img src="${apartment.image1}" alt="${apartment.name}" />
                                          <h3>${apartment.name}</h3>
                                          <p>Location: ${apartment.location}</p>
                                          <p>Price: ₦${formattedPrice}/mo</p>
                                      </a>
                                  </div>
                              `;
                          });
                      } else {
                          html = '<p>No results found.</p>';
                      }
                      $('#search-results').html(html);
                      $('#spinner').hide(); // Hide spinner
                  },
                  error: function() {
                      $('#spinner').hide(); // Hide spinner on error
                      $('#search-results').html('<p>Oops! Something went wrong. Please try again.</p>');
                  }
              });
          } else {
              $('#search-results').html('');
          }
      });
  });
</script>

  




<div id="spinner">
  <div class="spinner"></div>
</div>


<style>
  #spinner {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 20px;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 6px solid rgba(255, 255, 255, 0.3);
    border-top: 6px solid #3498db;
    border-radius: 50%;
    backdrop-filter: blur(10px);
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

</style>









  



<nav class="bottom-nav" aria-label="Main Navigation">
  <div id="home" class="nav-item " tabindex="0">
    <div class="nav-icon">
      <!-- Home SVG -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <path d="M3 9.5L12 3L21 9.5V21H14V14H10V21H3V9.5Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
      </svg>
    </div>
    <div class="nav-label">Home</div>
  </div>



  <div class="nav-item active" tabindex="0">
    <div class="nav-icon">
      <!-- Search SVG -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/>
        <line x1="16.6569" y1="16.6569" x2="21" y2="21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </div>
    <div class="nav-label">Search</div>
  </div>


  <div id="inbox" class="nav-item" tabindex="0">
    <div class="nav-icon">
      <!-- Inbox SVG -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10z" stroke="currentColor" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"/>
      </svg>
    </div>
    <div class="nav-label">Inbox</div>
  </div>
  



  <div id="applications" class="nav-item" tabindex="0">
    <div class="nav-icon">
      <!-- Applications (Document) SVG -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <rect x="4" y="3" width="16" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
        <line x1="8" y1="7" x2="16" y2="7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="8" y1="11" x2="16" y2="11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="8" y1="15" x2="12" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </div>
    <div class="nav-label">Applications</div>
  </div>


  <div id="user" class="nav-item" tabindex="0">
 
    <div  class="nav-icon">
     
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/>
        <path d="M4 20C4 16 8 14 12 14C16 14 20 16 20 20" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
      </svg>
   
    </div>
    
    <div class="nav-label">Profile</div>
  </div>
</nav>




<script>
  document.getElementById("inbox").addEventListener("click", function() {
    window.location.href = "/hostelallocation/inbox";  
  });
</script>


<script>
  document.getElementById("home").addEventListener("click", function() {
    window.location.href = "/hostelallocation/home";  
  });
</script>


<script>
  document.getElementById("applications").addEventListener("click", function() {
    window.location.href = "/hostelallocation/applications";  
  });
</script>

<script>
  document.getElementById("user").addEventListener("click", function() {
    window.location.href = "/hostelallocation/profile";  
  });
</script>



</body>
</html>
